extends ../app_layout.pug

block head
    meta(charset='UTF-8')
    meta(name='viewport', content='initial-scale=1')
    meta(name="theme-color", content="#5e35b1")
    title GEN | Event Creation
    meta(name='google-signin-client_id', content='185629692675-kl7mt54epmrdl5qa33299f7gkt75e6p4.apps.googleusercontent.com')
    link(href='https://fonts.googleapis.com/css?family=Montserrat', rel='stylesheet')
    link(rel='stylesheet', href='bower_components/materialize/dist/css/materialize.css')
    link(rel='stylesheet', href='bower_components/selectize/dist/css/selectize.css')
    link(href='https://fonts.googleapis.com/icon?family=Material+Icons', rel='stylesheet')
    link(rel='stylesheet', href='css/styles.css')

include ./nav/nav.pug

block main
    ul#contacts.hide
        if persons
            each person in persons
                div.contact
                    div.contact-name= person.name
                    div.contact-email= person.email
    main
        .row.margin-t-2
            .col.s10.offset-s1.m8.offset-m2.l6.offset-l3
                h5.blue-grey-text.text-accent-3 
                    | Ok 
                    span(data-bind="text:firstname")
                    | , so you want to organize an event...
        .row
            form.col.s10.offset-s1.m8.offset-m2.l8.offset-l2
                label(for="name-event").teal-text.text-accent-4 What name should we give to this event?
                input#name-event.event-input(type="text", name="name-event", placeholder="Type the event's name here", autofocus)

                // following events inspired by http://eventmanagement.com/events/types-of-events/
                - var eventTypes = ["Annual Shareholder Meeting", "Award Ceremonie", "Birthday", "Board Meeting", "Business Dinner", "Conference", "Executive Retreat", "Family Event", "Friend Gathering", "Golf Event", "Incentive Event", "Incentive Travel", "Meeting", "Networking Event", "Opening Ceremonie", "Press Conference", "Product Launch", "Seminar", "Team Building Event", "Theme Party", "Trade Fair", "Trade Show", "Vip Event", "Wedding Anniversarie", "Wedding"];
                label(for="type-event").teal-text.text-accent-4 What type of event is it?
                input#type-event.event-input(list="type-event-list", name="type-event", placeholder="Birthday party, Conference, etc.")
                datalist#type-event-list
                    each event in eventTypes
                        option(value= event)

                label(for="host-event").teal-text.text-accent-4 Who is hosting this event?
                input#host-event.event-input(type="text", name="host-event", placeholder="Type the host's name here")
                br
                small Provide contact information for guests
                .margin-t-1
                .input-field.col.s12.m12.l4
                    i.material-icons.prefix.teal-text.text-accent-4 phone
                    input#tel-event.event-input.validate(type='tel', placeholder='Telephone')
                .input-field.col.s12.m12.l4
                    i.material-icons.prefix.teal-text.text-accent-4 mail
                    input#mail-event.event-input.validate(type='email', placeholder='Email')
                .input-field.col.s12.m12.l4
                    i.material-icons.prefix.teal-text.text-accent-4 link
                    input#link-event.event-input.validate(type='url', placeholder='Website or event\'s link')
                    
                label#lab-guests(for="guests-event").teal-text.text-accent-4 Who should we invite?
                input#guests-event.event-input(type="text", name="guests-event", placeholder="Enter email addresses or contacts")

                label(for="place-event").teal-text.text-accent-4.margin-t-2 Where is this event taking place?
                input#place-event.event-input(type="text", name="place-event", placeholder="Enter location, full address, or else")

                
                .row.margin-t-2
                    h5.label.teal-text.text-accent-4 When does this event start?
                    .col.s6
                        input#startdate-event.event-input(type="date", placeholder="Pick a date").datepicker
                    .col.s6
                        input#starttime-event.event-input(type="time", placeholder="Pick a time").timepicker
                
                .row
                    h5.label.teal-text.text-accent-4 When does this event end?
                    .col.s6
                        input#enddate-event.event-input(type="date", placeholder="Pick a date").datepicker
                    .col.s6
                        input#endtime-event.event-input(type="time", placeholder="Pick a time").timepicker
                
                label(for="details-event").teal-text.text-accent-4 What other information your guests should know?
                textarea#details-event.event-input.materialize-textarea(name="details-event", placeholder="Type information your guests should know before the event.\nStick to the essential.")

                button#create-account.btn.green.accent-4.waves-effect.waves-light.margin-t-2.em0p7(type='submit', name='action', disabled, onclick='')
                  | Create My Event
                  i.material-icons.right send
block scripts
    script(src='js/addressreset.js')

    script(src='bower_components/jquery/dist/jquery.min.js')
    script(src="bower_components/localforage/dist/localforage.min.js")
    script(src='bower_components/pickadate/lib/compressed/picker.js')
    script(src='bower_components/pickadate/lib/compressed/picker.time.js')
    script(src='bower_components/selectize/dist/js/standalone/selectize.js')
    script(src='bower_components/materialize/dist/js/materialize.min.js')
    script(src='bower_components/knockout/dist/knockout.js')
    script(src='js/eventmain.js')
    script(src='js/selectize.js')
    script(src='https://maps.googleapis.com/maps/api/js?key=AIzaSyAzhI1uGHALh8iAXoCRQVzVZ3Kj7cT8oAo&libraries=places&callback=initAutocomplete', async, defer)
    script(src="js/eventstorage.js")
    if me
        script.
            var me = {};
            me.name = "#{me.name}" || "";
            me.image = "#{me.image}" || "img/gen-green.png";
            me.email = "#{me.email}" || "";
            me.firstname = "#{me.firstName}" || "";
            localforage.setItem("me", me).then(function() {
                return localforage.getItem("me");
            }).then(function(me) {
                ko.applyBindings(me);
            }).catch(function(err) {
                console.log(err);
            });
    else
        script.
            localforage.getItem("me")
            .then(function(me) {
                ko.applyBindings(me);
            }).catch(function(err) {
                console.log(err);
            });
